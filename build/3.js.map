{"version":3,"sources":["../../src/pages/statistics/statistics.module.ts","../../src/pages/statistics/statistics.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { StatisticsPage } from './statistics';\n\n@NgModule({\n  declarations: [\n    StatisticsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(StatisticsPage),\n  ],\n})\nexport class StatisticsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/statistics/statistics.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, AlertController } from 'ionic-angular';\nimport { AuthenticationProvider } from '../../providers/authentication';\nimport { StatisticsProvider } from '../../providers/statistics';\n\n@IonicPage({\n  name: 'statistics',\n  segment: 'statistics'\n})\n@Component({\n  selector: 'page-statistics',\n  templateUrl: 'statistics.html',\n})\nexport class StatisticsPage {\n\n  public safeCount: number = 0;\n  public unsafeCount: number = 0;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private alertCtrl: AlertController,\n    private authenticationProvider: AuthenticationProvider,\n    private loadingCtrl: LoadingController,\n    private statisticsProvider: StatisticsProvider\n  ) {}\n\n  public ionViewDidLoad() {\n    this.getSafeAndUnSafeCount();\n    this.authenticationProvider\n      .getObserver()\n      .subscribe(isAuthenticated => {\n        if (!isAuthenticated) {\n          this.navCtrl.setRoot('top');\n        }\n      });\n  }\n\n  public async getSafeAndUnSafeCount() {\n    const loading = this.loadingCtrl.create();\n    loading.present();\n\n    try {\n      const response = await this.statisticsProvider.getSafeAndUnSafeCount();\n\n      this.safeCount = response.safe;\n      this.unsafeCount = response.unsafe;\n    } catch (_) {\n      await this.alertCtrl.create({\n        title: 'データの取得に失敗しました',\n        buttons: [{\n          text: 'キャンセル',\n          role: 'cancel',\n          handler: () => {\n            // どこかのページから移動してきた場合はそのページに戻る\n            if (this.navCtrl.length() > 1) {\n              this.navCtrl.pop();\n              return;\n            }\n\n            // 直接このページを開いている場合はトップページに戻る\n            this.navCtrl.setRoot('top');\n          }\n        }, {\n          text: '再試行',\n          handler: () => {\n            this.getSafeAndUnSafeCount();\n          }\n        }]\n      }).present();\n    }\n\n    loading.dismiss();\n  }\n\n  public async doRefresh(refresher) {\n    await this.getSafeAndUnSafeCount();\n    refresher.complete();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/statistics/statistics.ts"],"sourceRoot":""}